# Correction Agent for ASR Errors in Voice-Enabled Assistants

## Problem Formulation

### States
- **Definition**: Each state represents a sentence within the solution space.
- **Cost Function**: Each state has an associated cost, evaluated using the provided cost function based on the OpenAI Whisper model.

### Neighbour Function
- **Phoneme Substitution**: Neighbours of a state are generated by making one phoneme substitution using mappings from the `phoneme_table.json`.
- **Word Addition**: Neighbours can also be generated by adding a word from `vocabulary.json` at either the beginning or the end of the sentence.

### Stopping Conditions
- **Local Optimality**: The algorithm terminates when it reaches a state with the lowest cost among its neighbours.
- **Iteration Limit**: The algorithm also stops after 100 iterations have been completed.

## Algorithm Overview

### Initialization
- **Phoneme Table**: The phoneme table is preprocessed to create a bidirectional mapping of character substitutions.
- **Best State Initialization**: The algorithm initializes the best state using the input text.

### Vocabulary Word Addition
- **Procedure**: The agent attempts to add words from the vocabulary at both the start and the end of the sentence. It performs two passes, one for the beginning and one for the end, and retains the result with the lower cost.

### Iterative Improvement
- **Main Loop**: The algorithm iterates for up to 100 steps or until no better neighbouring state is found.
- **Neighbour Generation**: In each iteration, phoneme substitutions are applied to generate neighbours.
- **Best Neighbour Selection**: The agent moves to the best neighbour with a lower or equal cost.

### Final Vocabulary Check
- **Vocabulary Addition**: After the main loop, another round of vocabulary word addition is performed at the start and end of the sentence.

### Reverse Check
- **Final Comparison**: The final state is compared with the version that includes initially added vocabulary words. The state with the lowest cost is chosen as the final output.

### Cost Evaluation
- **Cost Function**: The provided cost function is used throughout the process to evaluate the quality of each state. The state with the lowest cost is continuously updated and stored as the best state.

## Observations
While the agent yielded satisfactory results for most of the test cases, it struggled to correct a few errors. 

### Potential Reasons for errors
- **Audio Context**: The Whisper model may be influenced by background noise or hesitation detected at the beginning or end of recordings.
- **Model Bias**: The model might be biased by training data where hesitation or background conversation was common.
- **Overfitting to Noise**: The algorithm might misinterpret noise or silence in the audio as additional words.
- **Limited Semantic Understanding**: The cost function does not fully capture the meaning of sentences, leading to nonsensical additions.
- **Context Window Limitations**: The Whisper model may operate within a limited context window, favouring local improvements that do not make sense in the full sentence.
- **Ambiguity in Audio**: Ambiguous sounds at the start or end of the recording could be misinterpreted as actual words.

## Other Implemented Approaches and Comparative Analysis

### Beam Local Search
- **Method**: Beam search explores multiple promising paths simultaneously, which can overcome local optima.
- **Drawbacks**: It requires more memory and computation time to maintain multiple candidate solutions, making it less efficient for real-time systems.
- **Use Case**: Beam search may be more effective for longer sentences or sentences with multiple transcription errors.

### Trade-offs and Considerations
- **Simplicity vs. Effectiveness**: The implemented approach balances simplicity, speed, and effectiveness for common ASR errors.
- **Beam Search Efficiency**: While beam search can potentially find better corrections, it increases computational overhead, making it unsuitable for systems with real-time constraints.
- **Method Selection**: The choice of method should depend on the specific requirements, such as the importance of real-time correction versus the need for higher accuracy.

## Conclusion

This correction agent provides a robust solution for fixing common ASR transcription errors using a simple yet effective iterative search. It offers flexibility in handling real-time requirements while balancing the complexity of the solution.
